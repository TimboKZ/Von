# ![](https://s3-eu-central-1.amazonaws.com/foxypanda-ghost/2017/11/von-small.png)

[![npm](https://img.shields.io/npm/v/von-gallery.svg)]()
[![npm](https://img.shields.io/npm/dt/von-gallery.svg)](https://www.npmjs.com/package/von-gallery)

🖼️🤔 Node.js generator for (static) single page galleries. The default template is responsive and supports lazy loading.
Available as a CommonJS module and as a command line tool.

Building a single page gallery using just the `von` command:

![The concept behind Von.](https://s3-eu-central-1.amazonaws.com/foxypanda-ghost/2017/12/von-concept.png)

# Usage

Install [Node.js](https://nodejs.org/en/), which will automatically install NPM. Then, install Von globally:

```bash
npm install -g von-gallery
```

Now go into any folder on your computer with some images, open terminal, and simply run:

```bash
von -r
```

Where `-r` flags stands for "recursive". This will create an `index.html` file with a gallery of all of the images in
your directory. By default, Von simply groups images either by directory or by prefix (e.g. `prefix-my_image.jpg`) but
you can adjust this behaviour using the config. 

> Von is still in active development, some APIs may change.

# About

Von was meant to be very simple to use. In most cases you will only ever need to use the `von` command. Of course, you
might want to add some configuration too - this can all be done by passing additional arguments to `von`, e.g.
`von -o custom-output.html -t custom-template.pug --recursive`.

You can also create a `vonrc.js` or `vonrc.json` (choose one). Von will recognise both files as its config, but
`vonrc.js` gives you more freedom since you have all JavaScript features at your disposal. Config lets you do anything
that command line arguments can achieve, plus a little extra. Namely, you need the config to define groups. Once you
have defined a config, simply run `von` in the same directory and Von will automatically import it.

If you want to automate the process even further, you can add Von as a dependency to your NPM project
(`npm install --save von-gallery`) and use it as a CommonJS module (`const Von = require('von-gallery');`). In fact,
the command line tool is simply a wrapper around this module, so both offer identical functionality.

It's **very important** to remember that Von is a *simple* gallery generator - if you want to develop something complex
you should probably use a proper [static site generator](https://www.staticgen.com/). 

## How Von works

There are 4 components Von works with:

1. **Images.** Images have a file name, path to the image, dimensions and types.
2. **Groups.** Groups are collection of images. You tell Von how to generate groups using either command line arguments 
or `vonrc.js/json`.
3. **Schema.** Schema contains information about your gallery. This includes the page title, page description, array of
all groups, and other arbitrary information. Schema is generated by Von, but you can append extra information to it
using `vonrc.js/json` or your custom template.
4. **Template.** Template consumes the schema and spits out HTML for your gallery. Von offers several built-in templates
(e.g. `mini`). You can also define custom templates.

The logic Von executes can be separated into two distinct steps: schema generation and template compilation.

### Phase 1: Schema generation

During this phase Von does **not** change any files. Once Von parses all of the arguments and `vonrc.js(on)`, it begins
scanning the working directory for images. Once all of the images were discovered, they are sorted into groups. Finally,
the schema is generated based on the information from the arguments, config, and the newly generated groups.

This new schema is an independent piece of data. In fact, you don't even have to generate a template to use it. You can
simply export your schema using the `von -s` command or `Von.generateSchema({...})` function. The former might be useful
for debugging your `vonrc.js(on)`.  

### Phase 2: Template compilation

During the template compilation phase Von takes the generated schema and feeds it to whatever template you chose. Von
offers several built-in templates (`mini`) or you can define a custom template.

There is built-in support for Pug templates, so you can simply point Von at a Pug file using
`von -tp ./path/to/template.pug`. If you use Pug, all properties in the schema will become objects in the Pug template.
For example, `schema.title` will be exposed to Pug as `title`. 

If want to use your own templating solution, you can define a `*.von.js` file where `*` is your template name and tell
Von to use it using `von -tp ./path/to/*.von.js`. Von will initialise your template and call the `.compile()` method
letting you handle the rest of the logic. See [mini.von.js](./templates/mini/mini.von.js) for example implementation. 

Finally, built-in Von templates will write HTML out to the output file you specified. Note that your custom template
might can override this logic: it can write a different file, to multiple files or not write anything at all. 
